{"version":3,"sources":["services/auth.service.ts","components/login.component.tsx","components/register.component.tsx","services/auth-header.ts","services/user.service.ts","components/home.component.tsx","components/profile.component.tsx","common/EventBus.ts","components/board-user.component.tsx","components/board-moderator.component.tsx","components/board-admin.component.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["API_URL","username","password","axios","post","then","response","data","accessToken","localStorage","setItem","JSON","stringify","removeItem","email","userStr","getItem","parse","Login","props","handleLogin","bind","state","loading","message","Yup","shape","required","formValue","this","setState","AuthService","login","history","push","window","location","reload","error","resMessage","toString","className","src","alt","initialValues","validationSchema","onSubmit","htmlFor","name","type","component","disabled","role","Component","Register","handleRegister","successful","test","val","length","register","authHeader","user","Authorization","get","headers","Home","content","UserService","getPublicContent","Profile","redirect","userReady","currentUser","getCurrentUser","to","substring","substr","id","roles","map","index","eventBus","on","event","callback","document","addEventListener","e","dispatch","dispatchEvent","CustomEvent","detail","remove","removeEventListener","BoardUser","getUserBoard","status","EventBus","BoardAdmin","getModeratorBoard","getAdminBoard","App","logOut","showModeratorBoard","showAdminBoard","undefined","includes","logout","href","onClick","exact","path","BoardModerator","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0af05488.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst API_URL = \"http://localhost:8080/api/auth/\";\n\nclass AuthService {\n  login(username: string, password: string) {\n    return axios\n      .post(API_URL + \"signin\", {\n        username,\n        password\n      })\n      .then(response => {\n        if (response.data.accessToken) {\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n        }\n\n        return response.data;\n      });\n  }\n\n  logout() {\n    localStorage.removeItem(\"user\");\n  }\n\n  register(username: string, email: string, password: string) {\n    return axios.post(API_URL + \"signup\", {\n      username,\n      email,\n      password\n    });\n  }\n\n  getCurrentUser() {\n    const userStr = localStorage.getItem(\"user\");\n    if (userStr) return JSON.parse(userStr);\n\n    return null;\n  }\n}\n\nexport default new AuthService();\n","import { Component } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport AuthService from \"../services/auth.service\";\n\ninterface RouterProps {\n  history: string;\n}\n\ntype Props = RouteComponentProps<RouterProps>;\n\ntype State = {\n  username: string,\n  password: string,\n  loading: boolean,\n  message: string\n};\n\nexport default class Login extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.handleLogin = this.handleLogin.bind(this);\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      loading: false,\n      message: \"\"\n    };\n  }\n\n  validationSchema() {\n    return Yup.object().shape({\n      username: Yup.string().required(\"This field is required!\"),\n      password: Yup.string().required(\"This field is required!\"),\n    });\n  }\n\n  handleLogin(formValue: { username: string; password: string }) {\n    const { username, password } = formValue;\n\n    this.setState({\n      message: \"\",\n      loading: true\n    });\n\n\n    AuthService.login(username, password).then(\n      () => {\n        this.props.history.push(\"/profile\");\n        window.location.reload();\n      },\n      error => {\n        const resMessage =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString();\n\n        this.setState({\n          loading: false,\n          message: resMessage\n        });\n      }\n    );\n  }\n\n  render() {\n    const { loading, message } = this.state;\n\n    const initialValues = {\n      username: \"\",\n      password: \"\",\n    };\n\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container\">\n          <img\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n          />\n\n          <Formik\n            initialValues={initialValues}\n            validationSchema={this.validationSchema}\n            onSubmit={this.handleLogin}\n          >\n            <Form>\n              <div className=\"form-group\">\n                <label htmlFor=\"username\">Username</label>\n                <Field name=\"username\" type=\"text\" className=\"form-control\" />\n                <ErrorMessage\n                  name=\"username\"\n                  component=\"div\"\n                  className=\"alert alert-danger\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"password\">Password</label>\n                <Field name=\"password\" type=\"password\" className=\"form-control\" />\n                <ErrorMessage\n                  name=\"password\"\n                  component=\"div\"\n                  className=\"alert alert-danger\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={loading}>\n                  {loading && (\n                    <span className=\"spinner-border spinner-border-sm\"></span>\n                  )}\n                  <span>Login</span>\n                </button>\n              </div>\n\n              {message && (\n                <div className=\"form-group\">\n                  <div className=\"alert alert-danger\" role=\"alert\">\n                    {message}\n                  </div>\n                </div>\n              )}\n            </Form>\n          </Formik>\n        </div>\n      </div>\n    );\n  }\n}\n","import { Component } from \"react\";\nimport { Formik, Field, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\n\nimport AuthService from \"../services/auth.service\";\n\ntype Props = {};\n\ntype State = {\n  username: string,\n  email: string,\n  password: string,\n  successful: boolean,\n  message: string\n};\n\nexport default class Register extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.handleRegister = this.handleRegister.bind(this);\n\n    this.state = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      successful: false,\n      message: \"\"\n    };\n  }\n\n  validationSchema() {\n    return Yup.object().shape({\n      username: Yup.string()\n        .test(\n          \"len\",\n          \"The username must be between 3 and 20 characters.\",\n          (val: any) =>\n            val &&\n            val.toString().length >= 3 &&\n            val.toString().length <= 20\n        )\n        .required(\"This field is required!\"),\n      email: Yup.string()\n        .email(\"This is not a valid email.\")\n        .required(\"This field is required!\"),\n      password: Yup.string()\n        .test(\n          \"len\",\n          \"The password must be between 6 and 40 characters.\",\n          (val: any) =>\n            val &&\n            val.toString().length >= 6 &&\n            val.toString().length <= 40\n        )\n        .required(\"This field is required!\"),\n    });\n  }\n\n  handleRegister(formValue: { username: string; email: string; password: string }) {\n    const { username, email, password } = formValue;\n\n    this.setState({\n      message: \"\",\n      successful: false\n    });\n\n    AuthService.register(\n      username,\n      email,\n      password\n    ).then(\n      response => {\n        this.setState({\n          message: response.data.message,\n          successful: true\n        });\n      },\n      error => {\n        const resMessage =\n          (error.response &&\n            error.response.data &&\n            error.response.data.message) ||\n          error.message ||\n          error.toString();\n\n        this.setState({\n          successful: false,\n          message: resMessage\n        });\n      }\n    );\n  }\n\n  render() {\n    const { successful, message } = this.state;\n\n    const initialValues = {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n    };\n\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"card card-container\">\n          <img\n            src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\"\n            alt=\"profile-img\"\n            className=\"profile-img-card\"\n          />\n\n          <Formik\n            initialValues={initialValues}\n            validationSchema={this.validationSchema}\n            onSubmit={this.handleRegister}\n          >\n            <Form>\n              {!successful && (\n                <div>\n                  <div className=\"form-group\">\n                    <label htmlFor=\"username\"> Username </label>\n                    <Field name=\"username\" type=\"text\" className=\"form-control\" />\n                    <ErrorMessage\n                      name=\"username\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"email\"> Email </label>\n                    <Field name=\"email\" type=\"email\" className=\"form-control\" />\n                    <ErrorMessage\n                      name=\"email\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"password\"> Password </label>\n                    <Field\n                      name=\"password\"\n                      type=\"password\"\n                      className=\"form-control\"\n                    />\n                    <ErrorMessage\n                      name=\"password\"\n                      component=\"div\"\n                      className=\"alert alert-danger\"\n                    />\n                  </div>\n\n                  <div className=\"form-group\">\n                    <button type=\"submit\" className=\"btn btn-primary btn-block\">Sign Up</button>\n                  </div>\n                </div>\n              )}\n\n              {message && (\n                <div className=\"form-group\">\n                  <div\n                    className={\n                      successful ? \"alert alert-success\" : \"alert alert-danger\"\n                    }\n                    role=\"alert\"\n                  >\n                    {message}\n                  </div>\n                </div>\n              )}\n            </Form>\n          </Formik>\n        </div>\n      </div>\n    );\n  }\n}\n","export default function authHeader() {\n  const userStr = localStorage.getItem(\"user\");\n  let user = null;\n  if (userStr)\n    user = JSON.parse(userStr);\n\n  if (user && user.accessToken) {\n    return { Authorization: 'Bearer ' + user.accessToken }; // for Spring Boot back-end\n    // return { 'x-access-token': user.accessToken };       // for Node.js Express back-end\n  } else {\n    return { Authorization: '' }; // for Spring Boot back-end\n    // return { 'x-access-token': null }; // for Node Express back-end\n  }\n}","import axios from 'axios';\nimport authHeader from './auth-header';\n\nconst API_URL = 'http://localhost:8080/api/test/';\n\nclass UserService {\n  getPublicContent() {\n    return axios.get(API_URL + 'all');\n  }\n\n  getUserBoard() {\n    return axios.get(API_URL + 'user', { headers: authHeader() });\n  }\n\n  getModeratorBoard() {\n    return axios.get(API_URL + 'mod', { headers: authHeader() });\n  }\n\n  getAdminBoard() {\n    return axios.get(API_URL + 'admin', { headers: authHeader() });\n  }\n}\n\nexport default new UserService();\n","import { Component } from \"react\";\n\nimport UserService from \"../services/user.service\";\n\ntype Props = {};\n\ntype State = {\n  content: string;\n}\n\nexport default class Home extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      content: \"\"\n    };\n  }\n\n  componentDidMount() {\n    UserService.getPublicContent().then(\n      response => {\n        this.setState({\n          content: response.data\n        });\n      },\n      error => {\n        this.setState({\n          content:\n            (error.response && error.response.data) ||\n            error.message ||\n            error.toString()\n        });\n      }\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <header className=\"jumbotron\">\n          <h3>{this.state.content}</h3>\n        </header>\n      </div>\n    );\n  }\n}\n","import { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport AuthService from \"../services/auth.service\";\nimport IUser from \"../types/user.type\";\n\ntype Props = {};\n\ntype State = {\n  redirect: string | null,\n  userReady: boolean,\n  currentUser: IUser & { accessToken: string }\n}\nexport default class Profile extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      redirect: null,\n      userReady: false,\n      currentUser: { accessToken: \"\" }\n    };\n  }\n\n  componentDidMount() {\n    const currentUser = AuthService.getCurrentUser();\n\n    if (!currentUser) this.setState({ redirect: \"/home\" });\n    this.setState({ currentUser: currentUser, userReady: true })\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect} />\n    }\n\n    const { currentUser } = this.state;\n\n    return (\n      <div className=\"container\">\n        {(this.state.userReady) ?\n          <div>\n            <header className=\"jumbotron\">\n              <h3>\n                <strong>{currentUser.username}</strong> Profile\n              </h3>\n            </header>\n            <p>\n              <strong>Token:</strong>{\" \"}\n              {currentUser.accessToken.substring(0, 20)} ...{\" \"}\n              {currentUser.accessToken.substr(currentUser.accessToken.length - 20)}\n            </p>\n            <p>\n              <strong>Id:</strong>{\" \"}\n              {currentUser.id}\n            </p>\n            <p>\n              <strong>Email:</strong>{\" \"}\n              {currentUser.email}\n            </p>\n            <strong>Authorities:</strong>\n            <ul>\n              {currentUser.roles &&\n                currentUser.roles.map((role, index) => <li key={index}>{role}</li>)}\n            </ul>\n          </div> : null}\n      </div>\n    );\n  }\n}\n","const eventBus = {\n  on(event: string, callback: EventListener) {\n    document.addEventListener(event, (e) => callback(e));\n  },\n  dispatch(event: string, data?: any) {\n    document.dispatchEvent(new CustomEvent(event, { detail: data }));\n  },\n  remove(event: string, callback: EventListener) {\n    document.removeEventListener(event, callback);\n  },\n};\n\nexport default eventBus;\n","import { Component } from \"react\";\n\nimport UserService from \"../services/user.service\";\nimport EventBus from \"../common/EventBus\";\n\ntype Props = {};\n\ntype State = {\n  content: string;\n}\n\nexport default class BoardUser extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      content: \"\"\n    };\n  }\n\n  componentDidMount() {\n    UserService.getUserBoard().then(\n      response => {\n        this.setState({\n          content: response.data\n        });\n      },\n      error => {\n        this.setState({\n          content:\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString()\n        });\n\n        if (error.response && error.response.status === 401) {\n          EventBus.dispatch(\"logout\");\n        }\n      }\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <header className=\"jumbotron\">\n          <h3>{this.state.content}</h3>\n        </header>\n      </div>\n    );\n  }\n}\n","import { Component } from \"react\";\n\nimport UserService from \"../services/user.service\";\nimport EventBus from \"../common/EventBus\";\n\ntype Props = {};\n\ntype State = {\n  content: string;\n}\n\nexport default class BoardAdmin extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      content: \"\"\n    };\n  }\n\n  componentDidMount() {\n    UserService.getModeratorBoard().then(\n      response => {\n        this.setState({\n          content: response.data\n        });\n      },\n      error => {\n        this.setState({\n          content:\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString()\n        });\n\n        if (error.response && error.response.status === 401) {\n          EventBus.dispatch(\"logout\");\n        }\n      }\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <header className=\"jumbotron\">\n          <h3>{this.state.content}</h3>\n        </header>\n      </div>\n    );\n  }\n}\n","import { Component } from \"react\";\n\nimport UserService from \"../services/user.service\";\nimport EventBus from \"../common/EventBus\";\n\ntype Props = {};\n\ntype State = {\n  content: string;\n}\n\nexport default class BoardAdmin extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      content: \"\"\n    };\n  }\n\n  componentDidMount() {\n    UserService.getAdminBoard().then(\n      response => {\n        this.setState({\n          content: response.data\n        });\n      },\n      error => {\n        this.setState({\n          content:\n            (error.response &&\n              error.response.data &&\n              error.response.data.message) ||\n            error.message ||\n            error.toString()\n        });\n\n        if (error.response && error.response.status === 401) {\n          EventBus.dispatch(\"logout\");\n        }\n      }\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <header className=\"jumbotron\">\n          <h3>{this.state.content}</h3>\n        </header>\n      </div>\n    );\n  }\n}\n","import { Component } from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\n\nimport AuthService from \"./services/auth.service\";\nimport IUser from './types/user.type';\n\nimport Login from \"./components/login.component\";\nimport Register from \"./components/register.component\";\nimport Home from \"./components/home.component\";\nimport Profile from \"./components/profile.component\";\nimport BoardUser from \"./components/board-user.component\";\nimport BoardModerator from \"./components/board-moderator.component\";\nimport BoardAdmin from \"./components/board-admin.component\";\nimport EventBus from \"./common/EventBus\";\n\ntype Props = {};\n\ntype State = {\n  showModeratorBoard: boolean,\n  showAdminBoard: boolean,\n  currentUser: IUser | undefined\n}\n\nclass App extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.logOut = this.logOut.bind(this);\n\n    this.state = {\n      showModeratorBoard: false,\n      showAdminBoard: false,\n      currentUser: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const user = AuthService.getCurrentUser();\n\n    if (user) {\n      this.setState({\n        currentUser: user,\n        showModeratorBoard: user.roles.includes(\"ROLE_MODERATOR\"),\n        showAdminBoard: user.roles.includes(\"ROLE_ADMIN\"),\n      });\n    }\n\n    EventBus.on(\"logout\", this.logOut);\n  }\n\n  componentWillUnmount() {\n    EventBus.remove(\"logout\", this.logOut);\n  }\n\n  logOut() {\n    AuthService.logout();\n    this.setState({\n      showModeratorBoard: false,\n      showAdminBoard: false,\n      currentUser: undefined,\n    });\n  }\n\n  render() {\n    const { currentUser, showModeratorBoard, showAdminBoard } = this.state;\n\n    return (\n      <div>\n        <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\n          <Link to={\"/\"} className=\"navbar-brand\">\n            Haute Ecole d'informatique\n          </Link>\n          <div className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <Link to={\"/home\"} className=\"nav-link\">\n                Home\n              </Link>\n            </li>\n\n            {showModeratorBoard && (\n              <li className=\"nav-item\">\n                <Link to={\"/mod\"} className=\"nav-link\">\n                  Moderator Board\n                </Link>\n              </li>\n            )}\n\n            {showAdminBoard && (\n              <li className=\"nav-item\">\n                <Link to={\"/admin\"} className=\"nav-link\">\n                  Admin Board\n                </Link>\n              </li>\n            )}\n\n            {currentUser && (\n              <li className=\"nav-item\">\n                <Link to={\"/user\"} className=\"nav-link\">\n                  User\n                </Link>\n              </li>\n            )}\n          </div>\n\n          {currentUser ? (\n            <div className=\"navbar-nav ml-auto\">\n              <li className=\"nav-item\">\n                <Link to={\"/profile\"} className=\"nav-link\">\n                  {currentUser.username}\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <a href=\"/login\" className=\"nav-link\" onClick={this.logOut}>\n                  LogOut\n                </a>\n              </li>\n            </div>\n          ) : (\n            <div className=\"navbar-nav ml-auto\">\n              <li className=\"nav-item\">\n                <Link to={\"/login\"} className=\"nav-link\">\n                  Login\n                </Link>\n              </li>\n\n              <li className=\"nav-item\">\n                <Link to={\"/register\"} className=\"nav-link\">\n                  Sign Up\n                </Link>\n              </li>\n            </div>\n          )}\n        </nav>\n\n        <div className=\"container mt-3\">\n          <Switch>\n            <Route exact path={[\"/\", \"/home\"]} component={Home} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/register\" component={Register} />\n            <Route exact path=\"/profile\" component={Profile} />\n            <Route path=\"/user\" component={BoardUser} />\n            <Route path=\"/mod\" component={BoardModerator} />\n            <Route path=\"/admin\" component={BoardAdmin} />\n          </Switch>\n        </div>\n\n        { /*<AuthVerify logOut={this.logOut}/> */}\n      </div>\n    );\n  }\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}